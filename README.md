# ML-помощник для игры "Дорога приключений"

В данном проекте вы найдёте функционал для:
* Симуляции хода в игре
* Выбора и обучения модели, стоит ли совершать ход
* Пользовательский UI-интерфейс для работы с моделью

![](/assets/images/game_logo.png)

## Кратко о правилах хода в игре
### О карточках

В начале хода у каждого игрока есть три карточки: 
* Происхождение
* Стремление
* Судьба

![](/assets/images/cards.png)

А так же у игрока могут быть очки опыта (красные фишки).

Ещё есть шесть рун способностей:
* Сила
* Ловкость
* Телосложение
* Интеллект
* Мудрость
* Обаяние 

Каждая из карточек обладает своими свойствами:

* На карточке происхождения указаны две руны, доступные игроку
* Карточка стремления показывает, может ли игрок потратить очки опыта и получить какую-либо дополнительную руну
* Карточка же судьбы определяет, какие руны требуется собрать игроку для получения дополнительных очков в конце игры.

Выбранный для данного проекта ход делается в самом начале игры – игрок решает какое испытание выбрать, чтобы приобрести новые, либо преумножить старые руны. 

### Как пройти испытание

Для прохождения испытания бросается набор из трех базовых рун (доступных для игрока согласно его карточке происхождения, и дополнительной руны, согласно карточке стремлений) 
* Важно отметить, что помимо основных рун, можно использовать только руны, указанные на карте испытания. 
* Например: если на карточке испытания указаны руны Силы и Интеллекта, а у игрока на первой и второй карточках есть руны Силы и Ловкости. То он может использовать только руну Силы. 

Что нужно сделать, чтобы преодолеть испытание:
1. Определить сложность испытания - число, указанное в левом верхнем углу карты. 
2. На карточке испытаний указано два варианта - сверху и снизу, игрок выбирает одиин из них. От этого зависит, какую руну он получит при успешном прохождении испытания. Нужно выбрать один из путей (вариантов). Если в описании пути есть знак +1, то сложность выбранного пути увеличивается на один соответственно.
3. Собрать доступные руны: три основных, руны способностей, имеющиеся у вашего персонажа и подходящие испытанию. И дополнительную руну, если она подходит испытанию и у вас есть очки опыта, которые можно на неё обменять
4. Бросить руны. У каждой руны две стороны. В зависимости от того, какой стороной упала руна, она дает разное количество очков. Базовые руны могут дать ноль очков или одно, руны способностей - одно или два
5. Сложить все полученные очки. Если сумма больше или равна сложности испытания, то оно считается преодолённым, и можно забрать карточку себе

### Симуляция хода для обучения модели

Для обучения модели требовалось смоделировать достаточно большое количество ходов и ответов – стоит ли пытаться пройти выбранное испытание. 

Для этого были перебраны все варианты комбинаций трёх карт игрока и очков опыта. Затем из всех возможных игроков один выбрается случайно и составляет пару со случайным испытанием. 

Подсчитываются все руны способностей, которые может использовать игрок. И вычисляется вероятность преодолеть испытание согласно его сложности:

* Если вероятность мала, то симуляция говорит, что данный ход не стоит того ни при каких обстоятельствах. 
* Если вероятность средняя, но карточка испытания содержит целевую руну (одну из рун указанных на карте судьбы), то симуляция говорит, что игроку стоит рискнуть.
Если вероятность успеха высока, то не зависимо от приобретаемой руны, симуляция рекомендует сделать ход.

Таким образом симуляция возвращает `1` - если стоит попробовать взять испытание и `0`, если пытаться не стоит. 

### Модель 

Результаты, полученные при симуляции хода, используются для выбора и обучения модели. Весь процесс подробно описан в файле `model_choice.py`. Он содержит небольшое исследование данных, их подготовку для обучения, выбор модели и поиск наилучших гиперпараметров.

### Интерфейс
Файл `main.py` содержит небольшой UI-интерфейс с выбором карт игрока, очков опыта и предполагаемого испытания, а так же форму вывода предсказания модели:

![](/assets/images/tkinter-ui.png)


### Идеи для улучшения
* Предсказание не метки класса, а вероятности метки класса
* Замена UI-интерфейса с TkInter на Flet / Streamlit
* Дополнительное исследование колчиества ходов для обучения модели и возможности изъять часть карточек из обучения
* Добавление других опций оригинальной игры. Например, рун тьмы или дополнительных полученных способностей
